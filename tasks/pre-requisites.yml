---
# pre-requisites.yml
- name: Install OS base pre-requisites (Debian)
  sudo: true
  apt:
    name: "{{ item }}"
    state: present
  with_items: "{{ prerequisites[ansible_os_family] }}"
  when: "ansible_os_family == 'Debian'"

- name: Install OS base pre-requisites (RedHat)
  sudo: true
  yum:
    name: "{{ item }}"
    state: present
  with_items: "{{ prerequisites[ansible_os_family] }}"
  when: ansible_os_family  == 'RedHat'

- name: get the requirements file locally
  copy:
    src: requirements.txt
    dest: /tmp/requirements.txt

- name: Install the recommended packages
  sudo: true
  pip:
    requirements: /tmp/requirements.txt
